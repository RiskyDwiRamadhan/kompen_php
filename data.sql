INSERT INTO dosen (nip, nama_lengkap, username, password, email, foto, level)
VALUES
    ('1234567890', 'Ahmad Surya', 'ahmad123', 'ahmad123', 'ahmad@email.com', 'logo.png', 'Admin'),
    ('2345678901', 'Budi Santoso', 'budi456', 'budi123', 'budi@email.com', 'logo.png', 'Dosen'),
    ('3456789012', 'Citra Wijaya', 'citra789', 'citra123', 'citra@email.com', 'logo.png', 'Dosen'),
    ('4567890123', 'Dian Purnama', 'dian012', 'dian123', 'dian@email.com', 'logo.png', 'Dosen'),
    ('5678901234', 'Eka Pratama', 'eka567', 'eka123', 'eka@email.com', 'logo.png', 'Admin'),
    ('6789012345', 'Fani Wulandari', 'fani890', 'fani123', 'fani@email.com', 'logo.png', 'Dosen'),
    ('7890123456', 'Guntur Wijaya', 'guntur123', 'guntur123', 'guntur@email.com', 'logo.png', 'Dosen'),
    ('8901234567', 'Hendra Kusuma', 'hendra456', 'hendra123', 'hendra@email.com', 'logo.png', 'Dosen'),
    ('9012345678', 'Indah Sari', 'indah789', 'indah123', 'indah@email.com', 'logo.png', 'Dosen'),
    ('0123456789', 'Joko Susanto', 'joko012', 'joko123', 'joko@email.com', 'logo.png', 'Admin'),
    ('1122334455', 'Kartika Dewi', 'kartika', 'kartika123', 'kartika@email.com', 'logo.png', 'Dosen'),
    ('2233445566', 'Lukman Hakim', 'lukman', 'lukman123', 'lukman@email.com', 'logo.png', 'Dosen'),
    ('3344556677', 'Maya Citra', 'maya', 'maya123', 'maya@email.com', 'logo.png', 'Dosen'),
    ('4455667788', 'Nina Rahayu', 'nina', 'nina123', 'nina@email.com', 'logo.png', 'Admin'),
    ('5566778899', 'Oscar Wijaya', 'oscar', 'oscar123', 'oscar@email.com', 'logo.png', 'Dosen'),
    ('6677889900', 'Prita Sari', 'prita', 'prita123', 'prita@email.com', 'logo.png', 'Dosen'),
    ('7788990011', 'Qori Maulana', 'qori', 'qori123', 'qori@email.com', 'logo.png', 'Dosen'),
    ('8899001122', 'Rizky Kurniawan', 'rizky', 'rizky123', 'rizky@email.com', 'logo.png', 'Dosen'),
    ('9900112233', 'Sinta Purnama', 'sinta', 'sinta123', 'sinta@email.com', 'logo.png', 'Dosen'),
    ('0011223344', 'Tegar Pratama', 'tegar', 'tegar123', 'tegar@email.com', 'logo.png', 'Dosen');

INSERT INTO mahasiswa (nim, nama_lengkap, tahun_masuk, program_studi, email, no_telp, username, password, foto)
VALUES
    ('123456789', 'Agus Setiawan', '2019', 'D4 Teknik Informatika', 'agus@email.com', '081234567890', 'agus123', 'agus123', 'logo.png'),
    ('234567890', 'Bella Permata', '2020', 'D4 Sistem Informasi Bisnis', 'bella@email.com', '082345678901', 'bella456', 'bella123', 'logo.png'),
    ('345678901', 'Cahya Wijaya', '2021', 'D4 Teknik Informatika', 'cahya@email.com', '083456789012', 'cahya789', 'cahya123', 'logo.png'),
    ('456789012', 'Dini Rahayu', '2019', 'D4 Teknik Informatika', 'dini@email.com', '084567890123', 'dini012', 'dini123', 'logo.png'),
    ('567890123', 'Eko Pratama', '2020', 'D2 Pengembangan Piranti Lunak Situs', 'eko@email.com', '085678901234', 'eko567', 'eko123', 'logo.png'),
    ('678901234', 'Fitriana Wulandari', '2021', 'D2 Pengembangan Piranti Lunak Situs', 'fitriana@email.com', '086789012345', 'fitriana890', 'fitriana123', 'logo.png'),
    ('789012345', 'Galih Wijaya', '2019', 'D2 Pengembangan Piranti Lunak Situs', 'galih@email.com', '087890123456', 'galih123', 'galihs123123', 'logo.png'),
    ('890123456', 'Hana Kusuma', '2020', 'D4 Sistem Informasi Bisnis', 'hana@email.com', '088901234567', 'hana456', 'hana123', 'logo.png'),
    ('901234567', 'Indra Sari', '2021', 'D2 Pengembangan Piranti Lunak Situs', 'indra@email.com', '089012345678', 'indra789', 'indra123', 'logo.png'),
    ('012345678', 'Joko Susanto', '2019', 'D2 Pengembangan Piranti Lunak Situs', 'joko@email.com', '090123456789', 'joko012', 'joko123', 'logo.png'),
    ('112233445', 'Kartika Dewi', '2020', 'D4 Sistem Informasi Bisnis', 'kartika@email.com', '091234567890', 'kartika', 'kartika123', 'logo.png'),
    ('223344556', 'Lukman Hakim', '2021', 'D4 Sistem Informasi Bisnis', 'lukman@email.com', '092345678901', 'lukman', 'lukman123', 'logo.png'),
    ('334455667', 'Maya Citra', '2019', 'D4 Sistem Informasi Bisnis', 'maya@email.com', '093456789012', 'maya', 'maya123', 'logo.png'),
    ('445566778', 'Nina Rahayu', '2020', 'D4 Sistem Informasi Bisnis', 'nina@email.com', '094567890123', 'nina', 'nina123', 'logo.png'),
    ('556677889', 'Oscar Wijaya', '2021', 'D4 Teknik Informatika', 'oscar@email.com', '095678901234', 'oscar', 'oscar123', 'logo.png'),
    ('667788990', 'Prita Sari', '2019', 'D4 Sistem Informasi Bisnis', 'prita@email.com', '096789012345', 'prita', 'prita123', 'logo.png'),
    ('778899001', 'Qori Maulana', '2020', 'D4 Teknik Informatika', 'qori@email.com', '097890123456', 'qori', 'qori123', 'logo.png'),
    ('889900112', 'Rizky Kurniawan', '2021', 'D4 Teknik Informatika', 'rizky@email.com', '098901234567', 'rizky', 'rizky123', 'logo.png'),
    ('990011223', 'Sinta Purnama', '2019', 'D4 Teknik Informatika', 'sinta@email.com', '099012345678', 'sinta', 'sinta123', 'logo.png'),
    ('001122334', 'Tegar Pratama', '2020', 'D4 Teknik Informatika', 'tegar@email.com', '091123456789', 'tegar', 'tegar123', 'logo.png');
-- Semester 1
INSERT INTO alpa (nim, jml_alpa, semester)
VALUES
    ('123456789', 3, 1),
    ('234567890', 1, 1),
    ('345678901', 2, 1),
    ('456789012', 0, 1),
    ('567890123', 4, 1),
    ('678901234', 2, 1),
    ('789012345', 1, 1),
    ('890123456', 3, 1),
    ('901234567', 0, 1),
    ('012345678', 2, 1),
    ('112233445', 1, 1),
    ('223344556', 2, 1),
    ('334455667', 0, 1),
    ('445566778', 3, 1),
    ('556677889', 1, 1),
    ('667788990', 0, 1),
    ('778899001', 2, 1),
    ('889900112', 1, 1),
    ('990011223', 0, 1),
    ('001122334', 3, 1);

-- Semester 2
INSERT INTO alpa (nim, jml_alpa, semester)
VALUES
    ('123456789', 2, 2),
    ('234567890', 1, 2),
    ('345678901', 0, 2),
    ('456789012', 1, 2),
    ('567890123', 3, 2),
    ('678901234', 1, 2),
    ('789012345', 2, 2),
    ('890123456', 0, 2),
    ('901234567', 3, 2),
    ('012345678', 1, 2),
    ('112233445', 0, 2),
    ('223344556', 2, 2),
    ('334455667', 3, 2),
    ('445566778', 0, 2),
    ('556677889', 2, 2),
    ('667788990', 1, 2),
    ('778899001', 0, 2),
    ('889900112', 3, 2),
    ('990011223', 1, 2),
    ('001122334', 2, 2);

-- Semester 3
INSERT INTO alpa (nim, jml_alpa, semester)
VALUES
    ('123456789', 1, 3),
    ('234567890', 2, 3),
    ('345678901', 0, 3),
    ('456789012', 3, 3),
    ('567890123', 1, 3),
    ('678901234', 0, 3),
    ('789012345', 2, 3),
    ('890123456', 1, 3),
    ('901234567', 0, 3),
    ('012345678', 2, 3),
    ('112233445', 3, 3),
    ('223344556', 0, 3),
    ('334455667', 1, 3),
    ('445566778', 0, 3),
    ('556677889', 2, 3),
    ('667788990', 3, 3),
    ('778899001', 0, 3),
    ('889900112', 1, 3),
    ('990011223', 2, 3),
    ('001122334', 0, 3);

-- Semester 4
INSERT INTO alpa (nim, jml_alpa, semester)
VALUES
    ('123456789', 0, 4),
    ('234567890', 3, 4),
    ('345678901', 1, 4),
    ('456789012', 0, 4),
    ('567890123', 2, 4),
    ('678901234', 1, 4),
    ('789012345', 0, 4),
    ('890123456', 3, 4),
    ('901234567', 1, 4),
    ('012345678', 0, 4),
    ('112233445', 2, 4),
    ('223344556', 1, 4),
    ('334455667', 0, 4),
    ('445566778', 3, 4),
    ('556677889', 1, 4),
    ('667788990', 0, 4),
    ('778899001', 2, 4),
    ('889900112', 1, 4),
    ('990011223', 0, 4),
    ('001122334', 3, 4);

select m.nama_lengkap, m.th_masuk, m.prodi, m.email, m.no_telp, m.username, m.password, m.foto, a.jml_alpa, a.semester FROM mahasiswa m JOIN alpa a ON a.nim = m.nim ORDER BY m.nama_lengkap DESC;
SELECT
    m.nim,
    m.nama_lengkap,
    m.th_masuk,
    m.prodi,
    m.email,
    m.no_telp,
    m.username,
    m.password,
    m.foto,
    COALESCE(SUM(a.jml_alpa),
    0) AS kompen,
    COALESCE(SUM(ts.kompen),
    0) AS terkompen,
    COALESCE(SUM(a.jml_alpa),
    0) - COALESCE(SUM(ts.kompen),
    0) AS kurang
FROM
    mahasiswa m
LEFT JOIN alpa a ON
    m.nim = a.nim
LEFT JOIN tugas_selesai ts ON
    m.nim = ts.nim
WHERE
    m.nim = '646418';


    SELECT COALESCE(SUM(ts.kompen),0) AS terkompen,COALESCE(SUM(a.jml_alpa),0) - COALESCE(SUM(ts.kompen),0) AS kurang from alpa a LEFT JOIN tugas_selesai ts on a.nim = ts.nim  WHERE a.nim = '1122334' and ts.status = 'Completed'